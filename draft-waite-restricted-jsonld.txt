



None                                                            D. Waite
Internet-Draft                                             Ping Identity
Intended status: Experimental                               11 July 2020
Expires: 12 January 2021


                MultiPass Restricted JSON-LD Attributes
                  draft-waite-restricted-jsonld-latest

Abstract

   NOTE: this document was originally an attempt to restrict JSON-LD to
   a sufficient subset to be usable for a wide variety of credentials,
   including by parsers which did not have JSON-LD capabilities, and to
   allow for selective disclosure.  As the multipass ticket expanded to
   have different _formats_ of credentials, the need for this went away.

   As such, this is a text holding area until work begins defining an
   example credential format.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 12 January 2021.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.










Waite                    Expires 12 January 2021                [Page 1]

Internet-Draft            MultiPass attributes                 July 2020


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Simplified BSD License text
   as described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  JSON-LD 1.1 Attribute format  . . . . . . . . . . . . . .   2
       1.1.1.  JSON-LD 1.1 Restrictions  . . . . . . . . . . . . . .   4
   2.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     2.1.  Normative References  . . . . . . . . . . . . . . . . . .   5
     2.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   9

1.  Introduction

   Attributes within this specification are represented as multiple
   JWTs, each holding a subset of the attributes about the subject.
   These JWTs are signed by an ephemeral key in the issuer statement,
   indicated by the "atv" JWT value.  By using an ephemeral key and
   having no correlatable information about the subject or holder in the
   issuer statement, the information presented to the verifier can range
   anywhere from the full set of attributes from the issuer, to a
   cryptographic proof of some unspecified relationship to the issuer.

1.1.  JSON-LD 1.1 Attribute format

   Attributes are represented in a restricted JSON-LD format.  For
   example, the following document might be representative of the
   information presented by an issuer of state driver's licenses:
















Waite                    Expires 12 January 2021                [Page 2]

Internet-Draft            MultiPass attributes                 July 2020


   {
     "@type": [
       "https://schema.org/Person",
       "https://example.org/Licensee"
     ]
     "https://schema.org/name": "David Waite",
     "https://schema.org/familyName": "Waite",
     "https://schema.org/givenName": "David",
     "https://schema.org/homeLocation": {
       "@type": "https://schema.org/Place",
       "https://schema.org/address": {
         "@type": "https://schema.org/PostalAddress",
         "https://schema.org/addressCountry": "US",
         "https://schema.org/addressLocality": "Denver",
         "https://schema.org/addressRegion": "CO",
         "https://schema.org/streetAddress": "627 Incomplete Circle",
         "https://schema.org/postalCode": "80200"
       }
     },
     "https://schema.org/birthDate": "1900-01-01",
     "https://example.org/birthDate/over18": true,
     "https://example.org/birthDate/over21": true,
     "https://example.org/birthDate/over25": true
     "https://schema.org/image": "Base64EncodedImage=="
     "https://schema.org/height": "1.88 m",

     "https://example.org/hairColor": nil,
     "https://example.org/eyeColor": "brown",
     "https://example.org/issuedDate": 2020-01-01",
     "https://example.org/identifier": "01-154-0000",
     "https://example.org/correctiveLensesRequired": false,
     "https://example.org/veteran": false
   }

                        Figure 1: Example Attributes

   These attributes may be divided into individual attribute statements
   to enable selective disclosure.  For example, in-person sale of
   restricted substances may require the release of proof that the
   person is over 21, and an image for visual verification.  These might
   be represented as two seperate JSON-LD documents:










Waite                    Expires 12 January 2021                [Page 3]

Internet-Draft            MultiPass attributes                 July 2020


   {
     "https://example.org/birthDate/over18": true
   }

   {
     "https://schema.org/image": "Base64EncodedImage=="
   }

   These indidual JSON-LD 1.1 documents are protected as JWS documents,
   signed with the ephemeral key indicated in the "atv" value of the
   issuer statement.

1.1.1.  JSON-LD 1.1 Restrictions

   A set of restrictions on the JSON-LD 1.1 format are proposed to
   simplify tooling and usage in a secure, privacy-preserving context.
   These restrictions serve to provide the following properties:

   *  The document represented by each attribute is about the common
      subject

   *  Properties from multiple attribute documents are interpretable as
      a composition, without needing to resolve conflicting information

   *  Verifiers do not need a full JSON-LD and RDF toolset to understand
      attribute documents

   *  Attribute data is restricted to a hierarchal structure (instead of
      the directed cyclic graph structure of RDF)

   *  An issuer can not assert authoritative properties about entities
      other than the subject.

   The restrictions are as follows:

   1.   Each document represents the subject as the base or root node.

   2.   The JSON-LD MUST be in compacted form and MUST be specified
        without any "@context" keyword.

   3.   The document MUST limit the use of special keywords to "@id",
        "@type", "@list", "@set", "@json", "@language", "@value", and
        "@direction".

   4.   The use of "@direction" is DISCOURAGED due to compatibility with
        various RDF tools and formats.





Waite                    Expires 12 January 2021                [Page 4]

Internet-Draft            MultiPass attributes                 July 2020


   5.   The "@value" and "@set" keywords MUST NOT be used when there is
        an equivalent compacted form.

   6.   The same node property MUST NOT be present in two attributes to
        represent conflicting information about a node.

   7.   Multiple properties MAY be used indicate an unordered set of
        values across multiple documents.

   8.   Each node within an attribute document MUST either be a node
        reference consisting of an IRI, be an unnamed node, or be a
        locally named node.

   9.   An attribute statement MUST NOT present authoritative
        information on any entity other than the subject, such as by
        having both an "@id" keyword and properties.

   10.  Named nodes MAY be used to divide properties of a node among
        multiple attributes.

   11.  A named node MUST NOT reference itself.

   12.  Named nodes MUST only be referenced by a single property on one
        node.  This will be its parent node in the attribute hierarchy.

2.  References

2.1.  Normative References

   [I-D.ietf-oauth-security-topics]
              Lodderstedt, T., Bradley, J., Labunets, A., and D. Fett,
              "OAuth 2.0 Security Best Current Practice", Work in
              Progress, Internet-Draft, draft-ietf-oauth-security-
              topics-15, 5 April 2020, <http://www.ietf.org/internet-
              drafts/draft-ietf-oauth-security-topics-15.txt>.

   [OASIS.saml-core-2.0-os]
              Cantor, S., Kemp, J., Philpott, R., and E. Maler,
              "Assertions and Protocols for the OASIS Security Assertion
              Markup Language (SAML) V2.0", March 2005,
              <http://docs.oasis-open.org/security/saml/v2.0/saml-core-
              2.0-os.pdf>.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.




Waite                    Expires 12 January 2021                [Page 5]

Internet-Draft            MultiPass attributes                 July 2020


   [RFC3986]  Berners-Lee, T., Fielding, R., and L. Masinter, "Uniform
              Resource Identifier (URI): Generic Syntax", STD 66,
              RFC 3986, DOI 10.17487/RFC3986, January 2005,
              <https://www.rfc-editor.org/info/rfc3986>.

   [RFC6749]  Hardt, D., Ed., "The OAuth 2.0 Authorization Framework",
              RFC 6749, DOI 10.17487/RFC6749, October 2012,
              <https://www.rfc-editor.org/info/rfc6749>.

   [RFC7159]  Bray, T., Ed., "The JavaScript Object Notation (JSON) Data
              Interchange Format", RFC 7159, DOI 10.17487/RFC7159, March
              2014, <https://www.rfc-editor.org/info/rfc7159>.

   [RFC7518]  Jones, M., "JSON Web Algorithms (JWA)", RFC 7518,
              DOI 10.17487/RFC7518, May 2015,
              <https://www.rfc-editor.org/info/rfc7518>.

   [RFC7519]  Jones, M., Bradley, J., and N. Sakimura, "JSON Web Token
              (JWT)", RFC 7519, DOI 10.17487/RFC7519, May 2015,
              <https://www.rfc-editor.org/info/rfc7519>.

   [W3C.REC-vc-data-model-20191119]
              Sporny, M., Noble, G., Burnett, D., and D. Longley,
              "Verifiable Credentials Data Model 1.0", March 2019,
              <https://www.w3.org/TR/2019/CR-verifiable-claims-data-
              model-20190328>.

2.2.  Informative References

   [OpenID]   Sakimora, N., Bradley, J., Jones, M., de Medeiros, B., and
              C. Mortimore, "OpenID Connect Core 1.0", November 2014,
              <https://openiD.net/specs/openiD-connect-core-1_0.html>.

   [OpenID.Messages]
              Sakimura, N., Bradley, J., Jones, M., de Medeiros, B.,
              Mortimore, C., and E. Jay, "OpenID Connect Messages 1.0",
              June 2012, <http://openid.net/specs/openid-connect-
              messages-1_0.html>.

   [owasp_redir]
              "OWASP Cheat Sheet Series - Unvalidated Redirects and
              Forwards", 2020,
              <https://cheatsheetseries.owasp.org/cheatsheets/
              Unvalidated_Redirects_and_Forwards_Cheat_Sheet.html>.

   [RFC2818]  Rescorla, E., "HTTP Over TLS", RFC 2818,
              DOI 10.17487/RFC2818, May 2000,
              <https://www.rfc-editor.org/info/rfc2818>.



Waite                    Expires 12 January 2021                [Page 6]

Internet-Draft            MultiPass attributes                 July 2020


   [RFC3629]  Yergeau, F., "UTF-8, a transformation format of ISO
              10646", STD 63, RFC 3629, DOI 10.17487/RFC3629, November
              2003, <https://www.rfc-editor.org/info/rfc3629>.

   [RFC4949]  Shirey, R., "Internet Security Glossary, Version 2",
              FYI 36, RFC 4949, DOI 10.17487/RFC4949, August 2007,
              <https://www.rfc-editor.org/info/rfc4949>.

   [RFC6265]  Barth, A., "HTTP State Management Mechanism", RFC 6265,
              DOI 10.17487/RFC6265, April 2011,
              <https://www.rfc-editor.org/info/rfc6265>.

   [RFC6819]  Lodderstedt, T., Ed., McGloin, M., and P. Hunt, "OAuth 2.0
              Threat Model and Security Considerations", RFC 6819,
              DOI 10.17487/RFC6819, January 2013,
              <https://www.rfc-editor.org/info/rfc6819>.

   [RFC7230]  Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer
              Protocol (HTTP/1.1): Message Syntax and Routing",
              RFC 7230, DOI 10.17487/RFC7230, June 2014,
              <https://www.rfc-editor.org/info/rfc7230>.

   [RFC7231]  Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer
              Protocol (HTTP/1.1): Semantics and Content", RFC 7231,
              DOI 10.17487/RFC7231, June 2014,
              <https://www.rfc-editor.org/info/rfc7231>.

   [RFC7234]  Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke,
              Ed., "Hypertext Transfer Protocol (HTTP/1.1): Caching",
              RFC 7234, DOI 10.17487/RFC7234, June 2014,
              <https://www.rfc-editor.org/info/rfc7234>.

   [RFC7235]  Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer
              Protocol (HTTP/1.1): Authentication", RFC 7235,
              DOI 10.17487/RFC7235, June 2014,
              <https://www.rfc-editor.org/info/rfc7235>.

   [RFC7591]  Richer, J., Ed., Jones, M., Bradley, J., Machulak, M., and
              P. Hunt, "OAuth 2.0 Dynamic Client Registration Protocol",
              RFC 7591, DOI 10.17487/RFC7591, July 2015,
              <https://www.rfc-editor.org/info/rfc7591>.

   [RFC7595]  Thaler, D., Ed., Hansen, T., and T. Hardie, "Guidelines
              and Registration Procedures for URI Schemes", BCP 35,
              RFC 7595, DOI 10.17487/RFC7595, June 2015,
              <https://www.rfc-editor.org/info/rfc7595>.





Waite                    Expires 12 January 2021                [Page 7]

Internet-Draft            MultiPass attributes                 July 2020


   [RFC7636]  Sakimura, N., Ed., Bradley, J., and N. Agarwal, "Proof Key
              for Code Exchange by OAuth Public Clients", RFC 7636,
              DOI 10.17487/RFC7636, September 2015,
              <https://www.rfc-editor.org/info/rfc7636>.

   [RFC7800]  Jones, M., Bradley, J., and H. Tschofenig, "Proof-of-
              Possession Key Semantics for JSON Web Tokens (JWTs)",
              RFC 7800, DOI 10.17487/RFC7800, April 2016,
              <https://www.rfc-editor.org/info/rfc7800>.

   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for
              Writing an IANA Considerations Section in RFCs", BCP 26,
              RFC 8126, DOI 10.17487/RFC8126, June 2017,
              <https://www.rfc-editor.org/info/rfc8126>.

   [RFC8252]  Denniss, W. and J. Bradley, "OAuth 2.0 for Native Apps",
              BCP 212, RFC 8252, DOI 10.17487/RFC8252, October 2017,
              <https://www.rfc-editor.org/info/rfc8252>.

   [RFC8414]  Jones, M., Sakimura, N., and J. Bradley, "OAuth 2.0
              Authorization Server Metadata", RFC 8414,
              DOI 10.17487/RFC8414, June 2018,
              <https://www.rfc-editor.org/info/rfc8414>.

   [RFC8446]  Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", RFC 8446, DOI 10.17487/RFC8446, August 2018,
              <https://www.rfc-editor.org/info/rfc8446>.

   [RFC8705]  Campbell, B., Bradley, J., Sakimura, N., and T.
              Lodderstedt, "OAuth 2.0 Mutual-TLS Client Authentication
              and Certificate-Bound Access Tokens", RFC 8705,
              DOI 10.17487/RFC8705, February 2020,
              <https://www.rfc-editor.org/info/rfc8705>.

   [RFC8707]  Campbell, B., Bradley, J., and H. Tschofenig, "Resource
              Indicators for OAuth 2.0", RFC 8707, DOI 10.17487/RFC8707,
              February 2020, <https://www.rfc-editor.org/info/rfc8707>.

   [SAML.Core]
              Cantor, S., Kemp, J., Philpott, R., and E. Maler,
              "Assertions and Protocols for the OASIS Security Assertion
              Markup Language", March 2005, <http://docs.oasis-
              open.org/security/saml/v2.0/saml-core-2.0-os.pdf>.

   [USASCII]  Institute, A.N.S., "Coded Character Set -- 7-bit American
              Standard Code for Information Interchange, ANSI X3.4",
              1986.




Waite                    Expires 12 January 2021                [Page 8]

Internet-Draft            MultiPass attributes                 July 2020


   [W3C.REC-html401-19991224]
              Raggett, D., Hors, A., and I. Jacobs, "HTML 4.01
              Specification", World Wide Web Consortium Recommendation 
              REC-html401-19991224, 24 December 1999,
              <http://www.w3.org/TR/1999/REC-html401-19991224>.

   [W3C.REC-xml-20081126]
              Bray, T., Paoli, J., Sperberg-McQueen, M., Maler, E., and
              F. Yergeau, "Extensible Markup Language (XML) 1.0 (Fifth
              Edition)", World Wide Web Consortium Recommendation REC-
              xml-20081126, 26 November 2008,
              <http://www.w3.org/TR/2008/REC-xml-20081126>.

Author's Address

   David Waite
   Ping Identity

   Email: david@alkaline-solutions.com
































Waite                    Expires 12 January 2021                [Page 9]
